import streamlit as st
import pandas as pd

st.set_page_config(page_title="å£²ä¸Šåˆ†æã‚¢ãƒ—ãƒª", layout="wide")

st.title("ğŸ“Š å£²ä¸Šåˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰")

# --- 1. ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™ï¼ˆæœ¬æ¥ã¯ pd.read_csv('data.csv') ãªã©ã§èª­ã¿è¾¼ã¿ã¾ã™ï¼‰ ---
data = {
    'æ”¯åº—': ['æ±äº¬', 'å¤§é˜ª', 'åå¤å±‹', 'ç¦å²¡', 'æœ­å¹Œ', 'æ±äº¬', 'å¤§é˜ª', 'åå¤å±‹', 'ç¦å²¡', 'æœ­å¹Œ'],
    'å£²ä¸Š': [150, 120, 80, 90, 70, 200, 150, 100, 110, 90],
    'æœˆ': ['1æœˆ', '1æœˆ', '1æœˆ', '1æœˆ', '1æœˆ', '2æœˆ', '2æœˆ', '2æœˆ', '2æœˆ', '2æœˆ']
}
df = pd.DataFrame(data)

# --- 2. ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§æ¡ä»¶æŒ‡å®š (User Control) ---
with st.sidebar:
    st.header("ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è¨­å®š")
    # æ”¯åº—ã‚’é¸æŠã™ã‚‹ï¼ˆè¤‡æ•°é¸æŠå¯èƒ½ï¼‰
    selected_branches = st.multiselect(
        "è¡¨ç¤ºã™ã‚‹æ”¯åº—ã‚’é¸ã‚“ã§ãã ã•ã„",
        options=df['æ”¯åº—'].unique(),
        default=df['æ”¯åº—'].unique()
    )

# --- 3. ãƒ‡ãƒ¼ã‚¿ã®æŠ½å‡ºãƒ»é›†è¨ˆ (Processing) ---
# é¸æŠã•ã‚ŒãŸæ”¯åº—ã ã‘ã«ãƒ‡ãƒ¼ã‚¿ã‚’çµã‚Šè¾¼ã‚€ï¼ˆPythonã®ãƒ­ã‚¸ãƒƒã‚¯ï¼‰
filtered_df = df[df['æ”¯åº—'].isin(selected_branches)]

# --- 4. çµæœã®è¡¨ç¤º (Dynamic Output) ---
col1, col2 = st.columns([1, 2]) # 1:2ã®æ¯”ç‡ã§åˆ†å‰²

with col1:
    st.subheader("é›†è¨ˆãƒ‡ãƒ¼ã‚¿")
    st.dataframe(filtered_df) # è¡¨ã‚’è¡¨ç¤º

with col2:
    st.subheader("å£²ä¸Šã‚°ãƒ©ãƒ•")
    # æ”¯åº—ã”ã¨ã®åˆè¨ˆå£²ä¸Šã‚’æ£’ã‚°ãƒ©ãƒ•ã«ã™ã‚‹
    st.bar_chart(filtered_df.set_index('æ”¯åº—')['å£²ä¸Š'])

st.success("åˆ†æãŒå®Œäº†ã—ã¾ã—ãŸï¼")